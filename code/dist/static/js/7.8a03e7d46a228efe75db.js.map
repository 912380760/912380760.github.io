{"version":3,"sources":["webpack:///src/pages/animation.vue","webpack:///./src/pages/animation.vue?db14","webpack:///./src/pages/animation.vue"],"names":["animation","_this","this","num","cH","cW","index","preventDefault","current","next","pageY","x","y","pageX","nextColor","pageFill","targetR","fill","fillAnimation","currentColor","ripple","rippleSize","removeAnimation","particle","particles","particlesAnimation","key","opts","beginPath","color","width","stroke","closePath","Infinity","bgColor","draw","innerWidth","innerHeight","devicePixelRatio","fauxClick","resizeCanvas","handleEvent","startFauxClicking","inactive","clearInactiveTimeout","handleInactiveUser","pages_animation","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","id","on","click","touchstart","_v","_s","text","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.8a03e7d46a228efe75db.js","sourcesContent":["<template>\n  <div class=\"test\">\n    <canvas id=\"c\" @click=\"click\" @touchstart=\"click\"></canvas>\n    <div class=\"text-box\" @click=\"click\" @touchstart=\"click\">\n      <div class=\"text0 text\" v-if=\"num === 0\" :key=\"0\">{{text}}</div>\n      <div class=\"text1 text\" v-if=\"num === 1\" :key=\"1\">{{text}}</div>\n      <div class=\"text2 text\" v-if=\"num === 2\" :key=\"2\">{{text}}</div>\n      <div class=\"text3 text\" v-if=\"num === 3\" :key=\"3\">{{text}}</div>\n      <div class=\"text4 text\" v-if=\"num === 4\" :key=\"4\">{{text}}</div>\n      <div class=\"text5 text\" v-if=\"num === 5\" :key=\"5\">{{text}}</div> \n      <div class=\"text6 text\" v-if=\"num === 6\" :key=\"6\">{{text}}</div> \n      <div class=\"text7 text\" v-if=\"num === 7\" :key=\"7\">{{text}}</div> \n      <div class=\"text8 text\" v-if=\"num === 8\" :key=\"8\">{{text}}</div> \n      <div class=\"text9 text\" id=\"text\" v-if=\"num > 8\" :key=\"9\">{{num + 1}}</div> \n    </div>\n  </div>\n</template>\n\n<script>\nimport anime from 'animejs'\nimport { mapState } from 'vuex'\nexport default {\n  computed: mapState({\n  }),\n  data() {\n    return {\n      num: -1,\n      textList: [\n        '5月19日 晴 她今天竟然还没向我要礼物，这个仇我先记下来！',\n        '来这边已经一个多月了，很想你，很想见到你。',\n        '我是个很压抑自己情绪的人，木纳，不解风情，从我口中说出的情话惜字如金，请你谅解。',\n        '我觉得我们有几个问题可以花时间思考和沟通。',\n        '我们未来的职业规划？',\n        '我们现在的相处方式会不会让双方觉得太累了？',\n        '双方的感情需求是什么？',\n        '最后',\n        '我把我的整个灵魂都给你，连同它的怪癖，耍小脾气，忽明忽暗，它真讨厌，只有一点好，爱你。',\n      ],\n    }\n  },\n  methods: {\n    click() {\n      this.num++;\n      \n      if (this.num > 22) {\n        return this.$router.push({\n          name: 'yangxiuting',\n        })\n      }\n\n      if (this.num < 10) {\n        this.text = this.textList[this.num];\n        setTimeout(() => {\n          let cssSelector = anime({\n            targets: `.text-box .text${this.num}`,\n            translateY: 350,\n            opacity: 1,\n          });\n        }, 50)\n      } \n      \n    },\n  },\n  mounted() {\n    this.$nextTick(() => {\n      var c = document.getElementById(\"c\");\n      var ctx = c.getContext(\"2d\");\n      var cH;\n      var cW;\n      var bgColor = \"#FF6138\";\n      var animations = [];\n      var circles = [];\n\n      var colorPicker = (function() {\n        var colors = [\"#FF6138\", \"#FFBE53\", \"#2980B9\", \"#282741\"];\n        var index = 0;\n        function next() {\n          index = index++ < colors.length-1 ? index : 0;\n          return colors[index];\n        }\n        function current() {\n          return colors[index]\n        }\n        return {\n          next: next,\n          current: current\n        }\n      })();\n\n      function removeAnimation(animation) {\n        var index = animations.indexOf(animation);\n        if (index > -1) animations.splice(index, 1);\n      }\n\n      function calcPageFillRadius(x, y) {\n        var l = Math.max(x - 0, cW - x);\n        var h = Math.max(y - 0, cH - y);\n        return Math.sqrt(Math.pow(l, 2) + Math.pow(h, 2));\n      }\n\n      function addClickListeners() {\n        document.addEventListener(\"touchstart\", handleEvent);\n        document.addEventListener(\"mousedown\", handleEvent);\n      };\n\n      function handleEvent(e) {\n          if (e.touches) { \n            e.preventDefault();\n            e = e.touches[0];\n          }\n          var currentColor = colorPicker.current();\n          var nextColor = colorPicker.next();\n          var targetR = calcPageFillRadius(e.pageX, e.pageY);\n          var rippleSize = Math.min(200, (cW * .4));\n          var minCoverDuration = 750;\n          \n          var pageFill = new Circle({\n            x: e.pageX,\n            y: e.pageY,\n            r: 0,\n            fill: nextColor\n          });\n          var fillAnimation = anime({\n            targets: pageFill,\n            r: targetR,\n            duration:  Math.max(targetR / 2 , minCoverDuration ),\n            easing: \"easeOutQuart\",\n            complete: function(){\n              bgColor = pageFill.fill;\n              removeAnimation(fillAnimation);\n            }\n          });\n          \n          var ripple = new Circle({\n            x: e.pageX,\n            y: e.pageY,\n            r: 0,\n            fill: currentColor,\n            stroke: {\n              width: 3,\n              color: currentColor\n            },\n            opacity: 1\n          });\n          var rippleAnimation = anime({\n            targets: ripple,\n            r: rippleSize,\n            opacity: 0,\n            easing: \"easeOutExpo\",\n            duration: 900,\n            complete: removeAnimation\n          });\n          \n          var particles = [];\n          for (var i=0; i<32; i++) {\n            var particle = new Circle({\n              x: e.pageX,\n              y: e.pageY,\n              fill: currentColor,\n              r: anime.random(24, 48)\n            })\n            particles.push(particle);\n          }\n          var particlesAnimation = anime({\n            targets: particles,\n            x: function(particle){\n              return particle.x + anime.random(rippleSize, -rippleSize);\n            },\n            y: function(particle){\n              return particle.y + anime.random(rippleSize * 1.15, -rippleSize * 1.15);\n            },\n            r: 0,\n            easing: \"easeOutExpo\",\n            duration: anime.random(1000,1300),\n            complete: removeAnimation\n          });\n          animations.push(fillAnimation, rippleAnimation, particlesAnimation);\n      }\n\n      function extend(a, b){\n        for(var key in b) {\n          if(b.hasOwnProperty(key)) {\n            a[key] = b[key];\n          }\n        }\n        return a;\n      }\n\n      var Circle = function(opts) {\n        extend(this, opts);\n      }\n\n      Circle.prototype.draw = function() {\n        ctx.globalAlpha = this.opacity || 1;\n        ctx.beginPath();\n        ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI, false);\n        if (this.stroke) {\n          ctx.strokeStyle = this.stroke.color;\n          ctx.lineWidth = this.stroke.width;\n          ctx.stroke();\n        }\n        if (this.fill) {\n          ctx.fillStyle = this.fill;\n          ctx.fill();\n        }\n        ctx.closePath();\n        ctx.globalAlpha = 1;\n      }\n\n      var animate = anime({\n        duration: Infinity,\n        update: function() {\n          ctx.fillStyle = bgColor;\n          ctx.fillRect(0, 0, cW, cH);\n          animations.forEach(function(anim) {\n            anim.animatables.forEach(function(animatable) {\n              animatable.target.draw();\n            });\n          });\n        }\n      });\n\n      var resizeCanvas = function() {\n        cW = window.innerWidth;\n        cH = window.innerHeight;\n        c.width = cW * devicePixelRatio;\n        c.height = cH * devicePixelRatio;\n        ctx.scale(devicePixelRatio, devicePixelRatio);\n      };\n\n      (function init() {\n        resizeCanvas();\n        if (window.CP) {\n          // CodePen's loop detection was causin' problems\n          // and I have no idea why, so...\n          window.CP.PenTimer.MAX_TIME_IN_LOOP_WO_EXIT = 6000; \n        }\n        window.addEventListener(\"resize\", resizeCanvas);\n        addClickListeners();\n        if (!!window.location.pathname.match(/fullcpgrid/)) {\n          startFauxClicking();\n        }\n        handleInactiveUser();\n      })();\n\n      function handleInactiveUser() {\n        var inactive = setTimeout(function(){\n          fauxClick(cW/2, cH/2);\n        }, 1000);\n        \n        function clearInactiveTimeout() {\n          clearTimeout(inactive);\n          document.removeEventListener(\"mousedown\", clearInactiveTimeout);\n          document.removeEventListener(\"touchstart\", clearInactiveTimeout);\n        }\n        \n        document.addEventListener(\"mousedown\", clearInactiveTimeout);\n        document.addEventListener(\"touchstart\", clearInactiveTimeout);\n      }\n\n      function startFauxClicking() {\n        setTimeout(function(){\n          fauxClick(anime.random( cW * .2, cW * .8), anime.random(cH * .2, cH * .8));\n          startFauxClicking();\n        }, anime.random(200, 900));\n      }\n\n      function fauxClick(x, y) {\n        var fauxClick = new Event(\"mousedown\");\n        fauxClick.pageX = x;\n        fauxClick.pageY = y;\n        document.dispatchEvent(fauxClick);\n      }\n    })\n  },\n}\n</script>\n\n\n<style lang=\"less\" scoped>\n  canvas {\n    display: block;\n    width: 100vw;\n    height: 100vh;\n    cursor: pointer; \n  }\n  .text-box {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100vw;\n    height: 100vh;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n  .text {\n    padding: 0 240px;\n    font-size: 40px;\n    color: #fff;\n    user-select: none;\n    // text-align: center;\n    position: relative;\n    top: -350px;\n    opacity: 0.6;\n  }\n  #text {\n    font-size: 100px;\n  }\n\n  @media (max-width: 800px) {\n    .text {\n      padding: 0 30px;\n      font-size: 30px;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/animation.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"test\"},[_c('canvas',{attrs:{\"id\":\"c\"},on:{\"click\":_vm.click,\"touchstart\":_vm.click}}),_vm._v(\" \"),_c('div',{staticClass:\"text-box\",on:{\"click\":_vm.click,\"touchstart\":_vm.click}},[(_vm.num === 0)?_c('div',{key:0,staticClass:\"text0 text\"},[_vm._v(_vm._s(_vm.text))]):_vm._e(),_vm._v(\" \"),(_vm.num === 1)?_c('div',{key:1,staticClass:\"text1 text\"},[_vm._v(_vm._s(_vm.text))]):_vm._e(),_vm._v(\" \"),(_vm.num === 2)?_c('div',{key:2,staticClass:\"text2 text\"},[_vm._v(_vm._s(_vm.text))]):_vm._e(),_vm._v(\" \"),(_vm.num === 3)?_c('div',{key:3,staticClass:\"text3 text\"},[_vm._v(_vm._s(_vm.text))]):_vm._e(),_vm._v(\" \"),(_vm.num === 4)?_c('div',{key:4,staticClass:\"text4 text\"},[_vm._v(_vm._s(_vm.text))]):_vm._e(),_vm._v(\" \"),(_vm.num === 5)?_c('div',{key:5,staticClass:\"text5 text\"},[_vm._v(_vm._s(_vm.text))]):_vm._e(),_vm._v(\" \"),(_vm.num === 6)?_c('div',{key:6,staticClass:\"text6 text\"},[_vm._v(_vm._s(_vm.text))]):_vm._e(),_vm._v(\" \"),(_vm.num === 7)?_c('div',{key:7,staticClass:\"text7 text\"},[_vm._v(_vm._s(_vm.text))]):_vm._e(),_vm._v(\" \"),(_vm.num === 8)?_c('div',{key:8,staticClass:\"text8 text\"},[_vm._v(_vm._s(_vm.text))]):_vm._e(),_vm._v(\" \"),(_vm.num > 8)?_c('div',{key:9,staticClass:\"text9 text\",attrs:{\"id\":\"text\"}},[_vm._v(_vm._s(_vm.num + 1))]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ec290d0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/animation.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4ec290d0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./animation.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./animation.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./animation.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ec290d0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./animation.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4ec290d0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/animation.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}